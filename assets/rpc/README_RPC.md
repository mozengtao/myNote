# RPC (è¿œç¨‹è¿‡ç¨‹è°ƒç”¨) å®Œæ•´ç¤ºä¾‹

## ðŸ“š ä»€ä¹ˆæ˜¯ RPCï¼Ÿ

RPCï¼ˆRemote Procedure Callï¼Œè¿œç¨‹è¿‡ç¨‹è°ƒç”¨ï¼‰å…è®¸ç¨‹åºè°ƒç”¨å¦ä¸€å°æœºå™¨ä¸Šçš„å‡½æ•°ï¼Œå°±åƒè°ƒç”¨æœ¬åœ°å‡½æ•°ä¸€æ ·ç®€å•ã€‚

## ðŸ—‚ï¸ æ–‡ä»¶è¯´æ˜Ž

- `rpc_server.py` - RPC æœåŠ¡å™¨ç«¯ï¼Œæä¾›è¿œç¨‹å¯è°ƒç”¨çš„å‡½æ•°
- `rpc_client.py` - RPC å®¢æˆ·ç«¯ï¼Œè°ƒç”¨è¿œç¨‹æœåŠ¡å™¨ä¸Šçš„å‡½æ•°
- `README_RPC.md` - æœ¬è¯´æ˜Žæ–‡ä»¶

## ðŸš€ å¿«é€Ÿå¼€å§‹

### æ­¥éª¤ 1: å¯åŠ¨æœåŠ¡å™¨

æ‰“å¼€ç¬¬ä¸€ä¸ªç»ˆç«¯çª—å£ï¼š

```bash
python3 rpc_server.py
```

ä½ åº”è¯¥çœ‹åˆ°ï¼š
```
ðŸš€ RPC æœåŠ¡å™¨å¯åŠ¨ä¸­...
âœ… æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:8000
ðŸ“¡ ç­‰å¾…å®¢æˆ·ç«¯è¿žæŽ¥...
```

### æ­¥éª¤ 2: è¿è¡Œå®¢æˆ·ç«¯

æ‰“å¼€ç¬¬äºŒä¸ªç»ˆç«¯çª—å£ï¼š

```bash
python3 rpc_client.py
```

## ðŸ“‹ ç¤ºä¾‹åŒ…å«çš„åŠŸèƒ½

### 1. è®¡ç®—å™¨æœåŠ¡
```python
# å®¢æˆ·ç«¯ä»£ç 
result = proxy.add(15, 27)        # åŠ æ³•
result = proxy.subtract(100, 35)  # å‡æ³•
result = proxy.multiply(8, 9)     # ä¹˜æ³•
result = proxy.divide(144, 12)    # é™¤æ³•
```

### 2. æ•°æ®æœåŠ¡
```python
# èŽ·å–ç”¨æˆ·ä¿¡æ¯
user = proxy.get_user(1)

# èŽ·å–æ‰€æœ‰ç”¨æˆ·
users = proxy.list_users()

# æ·»åŠ æ–°ç”¨æˆ·
proxy.add_user(4, "èµµå…­", 32, "zhao@example.com")

# æœç´¢ç”¨æˆ·
results = proxy.search_users("å¼ ")
```

### 3. å·¥å…·å‡½æ•°
```python
# èŽ·å–æœåŠ¡å™¨æ—¶é—´
time = proxy.get_server_time()

# å›žå£°æµ‹è¯•
echo = proxy.echo("Hello RPC!")

# å¤„ç†åˆ—è¡¨æ•°æ®
stats = proxy.process_list([10, 20, 30, 40, 50])
```

## ðŸ” RPC å·¥ä½œåŽŸç†

```
å®¢æˆ·ç«¯ (rpc_client.py)           æœåŠ¡å™¨ (rpc_server.py)
       |                                  |
       | 1. proxy.add(5, 10)              |
       |--------------------------------->|
       |                                  | 2. æ‰§è¡Œ add(5, 10)
       |                                  |    return 15
       | 3. è¿”å›žç»“æžœ: 15                   |
       |<---------------------------------|
       |                                  |
```

## ðŸ’¡ å…³é”®æ¦‚å¿µ

### æœåŠ¡å™¨ç«¯ (rpc_server.py)

1. **åˆ›å»ºæœåŠ¡å™¨**
```python
server = SimpleXMLRPCServer(("localhost", 8000))
```

2. **æ³¨å†Œå‡½æ•°**
```python
server.register_function(add, "add")
```

3. **æ³¨å†Œç±»å®žä¾‹**
```python
calculator = Calculator()
server.register_instance(calculator)
```

### å®¢æˆ·ç«¯ (rpc_client.py)

1. **è¿žæŽ¥æœåŠ¡å™¨**
```python
proxy = xmlrpc.client.ServerProxy("http://localhost:8000")
```

2. **è°ƒç”¨è¿œç¨‹å‡½æ•°**
```python
result = proxy.add(5, 10)  # åœ¨æœåŠ¡å™¨ä¸Šæ‰§è¡Œ
```

## ðŸŽ¯ ä¼˜åŠ¿

- âœ… **ç®€å•** - è°ƒç”¨è¿œç¨‹å‡½æ•°å°±åƒæœ¬åœ°å‡½æ•°
- âœ… **é€æ˜Ž** - éšè—ç½‘ç»œé€šä¿¡ç»†èŠ‚
- âœ… **çµæ´»** - æ”¯æŒå„ç§æ•°æ®ç±»åž‹
- âœ… **è·¨å¹³å°** - å¯ä»¥åœ¨ä¸åŒæœºå™¨é—´é€šä¿¡

## ðŸ”§ æ‰©å±•ç»ƒä¹ 

1. **æ·»åŠ æ›´å¤šå‡½æ•°**
   - åœ¨æœåŠ¡å™¨ç«¯æ·»åŠ æ–°å‡½æ•°
   - åœ¨å®¢æˆ·ç«¯è°ƒç”¨å®ƒ

2. **ä¿®æ”¹æœåŠ¡å™¨åœ°å€**
   - æ”¹æˆçœŸå®žçš„ IP åœ°å€
   - åœ¨ä¸åŒæœºå™¨ä¸Šè¿è¡Œ

3. **é”™è¯¯å¤„ç†**
   - å°è¯•è°ƒç”¨ä¸å­˜åœ¨çš„å‡½æ•°
   - ä¼ é€’é”™è¯¯çš„å‚æ•°ç±»åž‹

4. **æ€§èƒ½æµ‹è¯•**
   - æµ‹é‡ RPC è°ƒç”¨çš„å»¶è¿Ÿ
   - æ¯”è¾ƒæœ¬åœ°è°ƒç”¨å’Œè¿œç¨‹è°ƒç”¨

## ðŸ“Š RPC vs REST

| ç‰¹æ€§ | RPC | REST API |
|------|-----|----------|
| é£Žæ ¼ | å‡½æ•°è°ƒç”¨ | èµ„æºæ“ä½œ |
| ä¾‹å­ | `getUser(123)` | `GET /users/123` |
| åè®® | å¤šç§ | ä¸»è¦ HTTP |
| å­¦ä¹ æ›²çº¿ | è¾ƒä½Ž | ä¸­ç­‰ |

## ðŸŒŸ çŽ°ä»£ RPC æ¡†æž¶

- **gRPC** - Google å¼€å‘ï¼Œé«˜æ€§èƒ½
- **Apache Thrift** - Facebook å¼€å‘ï¼Œè·¨è¯­è¨€
- **JSON-RPC** - åŸºäºŽ JSONï¼Œè½»é‡çº§

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å®‰å…¨æ€§** - ç”Ÿäº§çŽ¯å¢ƒéœ€è¦æ·»åŠ èº«ä»½éªŒè¯
2. **é˜²ç«å¢™** - ç¡®ä¿ç«¯å£ 8000 å¼€æ”¾
3. **é”™è¯¯å¤„ç†** - å§‹ç»ˆæ•èŽ·ç½‘ç»œå¼‚å¸¸
4. **è¶…æ—¶è®¾ç½®** - é¿å…é•¿æ—¶é—´ç­‰å¾…

## ðŸŽ“ å­¦ä¹ èµ„æº

- Python xmlrpc æ–‡æ¡£: https://docs.python.org/3/library/xmlrpc.html
- gRPC å®˜ç½‘: https://grpc.io
- RPC åŽŸç†: https://en.wikipedia.org/wiki/Remote_procedure_call

