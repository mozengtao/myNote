## 核心总结

1. 工厂模式核心要点（C 语言 / 内核视角）
特性		实现方式						  内核适配优化
产品抽象	函数指针结构体					   内核统一的驱动 / 算法接口（如 pci_driver、crypto_alg）
创建封装	工厂函数（参数判断 + 实例返回）		内核链表遍历匹配（如 PCI 驱动链表）
扩展方式	新增产品实例 + 工厂函数参数判断		内核驱动注册机制（自动加入工厂匹配链表）
核心优势	解耦创建与使用、扩展友好			驱动 / 算法热插拔、无需修改内核核心逻辑

2. 内核工厂模式的核心价值
封装复杂度：将设备 ID 匹配、内存分配、硬件初始化等复杂创建逻辑封装在工厂函数中，驱动开发者只需实现核心业务逻辑；
统一接口：所有产品遵循相同的函数指针规范，内核核心逻辑无需适配不同产品的实现；
动态扩展：新增驱动 / 算法时，仅需注册产品实例，无需修改内核的工厂逻辑（符合 “开闭原则”）；
降低耦合：内核核心层（工厂）与业务层（驱动 / 算法）完全分离，核心代码稳定不变。

3. 关键认知
Linux 内核中的工厂模式不是 OOP 语法的照搬，而是思想层面的落地：
无 “抽象类”，用「函数指针结构体」定义产品接口；
无 “工厂类”，用「全局工厂函数」封装创建逻辑；
无 “继承”，用「结构体实例填充函数指针」实现具体产品；
核心目标是 “让内核核心逻辑不感知具体产品的存在”，仅通过统一接口交互，这也是设计模式的本质 —— 解决模块耦合问题。