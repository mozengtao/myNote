1. 适配器模式核心要点（C 语言 / 内核视角）
特性		实现方式						内核适配优化
目标接口	函数指针结构体					内核统一的操作集（如spi_master、file_operations）
适配器层	封装被适配者，实现目标接口		 内核驱动注册机制（自动将适配器接入核心层）
接口转换	参数 / 返回值类型 / 命名转换	内核宏定义（简化类型转换，如__force）
核心优势	无侵入、接口统一、复用性强		 硬件 / 文件系统 / 系统调用的跨平台兼容

2. 内核适配器模式的核心价值
屏蔽底层差异：内核核心层（SPI/VFS/ 块设备）无需关心底层硬件 / 模块的具体实现，仅依赖统一目标接口；
保护原有逻辑：被适配者（如厂商硬件驱动、旧文件系统）无需修改，降低引入 bug 的风险；
灵活扩展：新增硬件 / 文件系统时，只需实现适配器层，无需修改内核核心逻辑；
跨层兼容：实现 32 位 / 64 位、内核 / 用户态、不同硬件平台的接口兼容。

3. 关键认知
Linux 内核中的适配器模式不是 OOP 语法的照搬，而是思想层面的落地：
无 “适配器类”，用「函数指针结构体 + 封装函数」实现适配器层；
无 “继承”，用「直接调用被适配者接口」完成逻辑复用；
无 “多态”，用「统一目标接口 + 不同适配器实例」实现行为替换；
核心目标是 “让内核核心层成为‘无感知的统一调度者’”，适配器层成为 “底层差异的唯一处理点”，这也是设计模式的本质 —— 解决 “统一框架” 与 “多样化实现” 的耦合问题。